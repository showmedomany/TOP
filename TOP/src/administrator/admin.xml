<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Admin">


	  
	<select id="insertFitnessUserSearchIDCheck" parameterType="String" resultType="int">
		select count(*) from vt_register where id=#{id}	
	</select>
	<select id="insertFitnessUserSearchID" parameterType="String" resultType="myPage.RegisterDataBean">
		select * from vt_register where id=#{id}	
	</select>

	<select id="insertFitnessUserSearchNickNameCheck" parameterType="String" resultType="int">
		select count(*) from vt_members where nickname=#{searchMsg}	
	</select>
	<select id="insertFitnessUserSearchEmailCheck" parameterType="String" resultType="int">
		select count(*) from vt_members where email=#{searchMsg}	
	</select>

	
	
	<select id="insertFitnessUserSearchNickName" parameterType="String" resultType="member.MemberDataBean">
		select id from vt_members where nickname=#{searchMsg}		
	</select>
	
	<select id="insertFitnessUserSearchEmail" parameterType="String" resultType="member.MemberDataBean">
		select id from vt_members where email = #{searchMsg}
	</select>


	<select id="getUserRegisterCheck" parameterType="String" resultType="int">
		select count(*) from vt_register where id = #{userId}
	</select>
	
	<select id="getUserRegister" parameterType="String" resultType="myPage.RegisterDataBean">
		select * from vt_register where id = #{userId}
	</select>
	
	<select id="getTrainerIdList"  resultType="String">
		select trainer_id from vt_trainer
	</select>
	
	<update id="updateFitnessInfo" parameterType="myPage.RegisterDataBean">
		update vt_register set exp_date=#{exp_date}, start_date=#{start_date}, end_date=#{end_date}, 
		GX_check=#{gx_check}, PT_check=#{pt_check}, PT_count=#{pt_count, jdbcType=VARCHAR}, 
		trainer_id = #{trainer_id} where id = #{id}	
	</update>
	<insert id="insertFitnessInfo" parameterType="myPage.RegisterDataBean">
		insert into vt_register values(register_seq.nextval, #{id}, #{start_date}, #{exp_date}, 
		#{end_date}, #{gx_check}, #{pt_check}, #{pt_count, jdbcType=VARCHAR}, #{trainer_id})		
	</insert>
	
	<select id="getMemberDataCount" resultType="int">
		select count(*) from vt_members where authority_id = 2
	</select>
	
	
	<select id="getMemberList" parameterType="Map" resultType="member.MemberDataBean">
		select ID, AUTHORITY_ID, PASSWD, NAME, NICKNAME, PHONE, ZIPCODE, ADDRESS, EMAIL, JOIN_DATE, r from 
		(select ID, AUTHORITY_ID, PASSWD, NAME, NICKNAME, PHONE, ZIPCODE, ADDRESS, EMAIL, JOIN_DATE, rownum r from 
		(select ID, AUTHORITY_ID, PASSWD, NAME, NICKNAME, PHONE, ZIPCODE, ADDRESS, EMAIL, JOIN_DATE from vt_members order by JOIN_DATE desc) order by JOIN_DATE desc)
		 where r &gt;= #{start} and r &lt;= #{end}
	</select>
	
	<select id="getNameSearchCount" parameterType="String" resultType="int">
		select count(*) from vt_members where name = #{searchMessage}
	</select>
	<select id="getIdSearchCount" parameterType="String" resultType="int">
		select count(*) from vt_members where id = #{searchMessage}
	</select>
	<select id="getNickNameSearchCount" parameterType="String" resultType="int">
		select count(*) from vt_members where nickname = #{searchMessage}
	</select>	
	 
	 
	 
	 <select id="getMemberSearchIdList" parameterType="String" resultType="member.MemberDataBean">
	 	select * from vt_members where id = #{searchMessage}
	 </select>
	 <select id="getMemberSearchNickNameList" parameterType="String" resultType="member.MemberDataBean">
	 	select * from vt_members where nickname = #{searchMessage}
	 </select>
	 
	 <!-- 인바디 정보 등록 확인 -->
	 <select id="getInbodyCheck" parameterType="String" resultType="int">
	 	select count(*) from vt_inbody where id = #{id}
	 </select>
	 
	 <!-- 검색한 아이디 인바디 정보 반환 -->
	 <select id="getInbodyData" parameterType="String" resultType="myPage.InbodyDataBean">
	 	select * from vt_inbody where id = #{id}
	 </select>
	 
	 <!-- 인바디 수정 -->
	 <update id="updateInbodyInfo" parameterType="myPage.InbodyDataBean">
		update vt_inbody set age=#{age}, height=#{height}, sex=#{sex},
		weight=#{weight}, bmi=#{bmi}, check_date=#{check_date} where id = #{id}	
	</update>	 
	 
	 <!--  인바디 저장 -->
	 <insert id="insertInbodyInfo" parameterType="myPage.InbodyDataBean">
	 	insert into vt_inbody values(inbody_seq.nextval, #{id}, #{age}, #{height}, #{sex}, 
		#{weight}, #{bmi}, #{check_date})
	 </insert>	
</mapper>

